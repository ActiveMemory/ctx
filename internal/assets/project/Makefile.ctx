# ctx — context management targets
# Generated by: ctx init
# Safe to overwrite: ctx owns this file. Customize your Makefile, not this one.

.PHONY: journal journal-serve

## journal: Export sessions and regenerate journal site
journal:
	@echo "==> Exporting sessions to journal..."
	@ctx recall export --all
	@echo "==> Generating journal site..."
	@ctx journal site --build
	@echo ""
	@echo "Journal site updated!"
	@echo ""
	@echo "Next steps (in Claude Code):"
	@echo "  /ctx-journal-enrich-all  — exports if needed + adds metadata per entry"
	@echo ""
	@echo "Then re-run: make journal"

## journal-serve: Serve the journal site locally
journal-serve:
	@ctx journal site --serve
